<div class="row m-1">

    <!-- Colonne formulaire -->
    <div class="col-12 col-md-6 mb-3">
        <div class="formulaire" style="width: 28rem; margin: auto;">
            <!-- Nom -->
            <div class="champ">
                <label for="nom" class="obligatoire" style="max-width: 100px">Nom</label>
                <input id="nom"
                       type="text"
                       required
                       minlength="1"
                       maxlength="30"
                       pattern="^[a-zA-Z]+([' \-]?[a-zA-Z]+)*$"
                       autocomplete="off">
            </div>

            <!-- Prénom -->
            <div class="champ">
                <label for="prenom" class="obligatoire" style="max-width: 100px">Prénom</label>
                <input id="prenom"
                       type="text"
                       required
                       minlength="1"
                       maxlength="30"
                       pattern="^[A-Za-zÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðòóôõöùúûüýÿ]([A-Za-zÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðòóôõöùúûüýÿ '\-]*[A-Za-zÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðòóôõöùúûüýÿ])*$"
                       autocomplete="off">
            </div>

            <!-- Bouton -->
            <div class="d-flex justify-content-evenly">
                <button id="btnAjouter" class="btn btn-sm btn-danger mt-3">Ajouter</button>
            </div>
        </div>
    </div>

    <!-- Colonne tableau -->
    <div class="col-12 col-md-6">
        <table style="width: 400px">
            <thead>
            <th class="col d-flex justify-content-between align-items-center">
                <span>Nom et prénom</span>
                <button id="btnInit" class="btn btn-sm btn-danger">Réinitialiser</button>
            </th>
            </thead>
            <tbody id="lesLignes"></tbody>
        </table>
    </div>
</div>
</div>

<pre><code>
btnInit.onclick = async () => {
    const reponse = await fetch('ajax/init.php');
    const data = await reponse.json();
    afficher(data);
};

// -----------------------------------------------------------------------------------
// Fonctions de traitement
// -----------------------------------------------------------------------------------

async function chargerFichier() {
    const reponse = await fetch('/data/etudiant.json');
    const data = await reponse.json();
    afficher(data);
}

function afficher(data) {
    lesLignes.innerHTML = '';
    for (const etudiant of data) {
        const tr = lesLignes.insertRow();
        tr.insertCell().innerText = etudiant.nom + ' ' + etudiant.prenom;
    }
}

/**
 * Ajoute un étudiant dans le tableau et réécrit le fichier etudiant.json
 */
function ajouter() {
    // réécriture du fichier etudiant.json
    const formData = new FormData();
    formData.append('nom', nom.value);
    formData.append('prenom', prenom.value);
    const options = {
        method: 'POST',
        body: formData
    };
    fetch('ajax/ajouter.php', options)
        .then(response => {
            if (!response.ok) {
                throw new Error(`Erreur HTTP : ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
                // Gérer la réponse du serveur
                afficherToast('Etudiant ajouté dans le fichier json');
                afficher(data);
            })
        .catch(error => msg.innerHTML = genererMessage(error.message));
}
</code>
</pre>


